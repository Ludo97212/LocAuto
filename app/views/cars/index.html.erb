<div class="banner">
  <div class="heading">
    <%= form_tag cars_path, method: :get do %>
      <%= text_field_tag :query, params[:query], placeholder: "marque/modèle/adresse" %>
      <button class="icon"><i class="fa fa-search"></i></button>
    <% end %>
    <h1>LOC'AUTO</h1>
    <%= link_to "Ajouter votre voiture", new_car_path, class: "btn btn-light" %>
  </div>
</div>

<div class="container">
  <div id="map" style="width: 100%; height: 600px; margin-bottom: 50px;"
      data-markers="<%= @markers.to_json %>">
  </div>
    <% if @cars.empty? == false %>
        <div class="index-grid">
          <% @cars.each do |car| %>
            <div class="card-trip">
              <% if car.photo.attached? %>
                <%= link_to cl_image_tag(car.photo.key), car_path(car) %>
              <% else %>
                <%= link_to image_tag("default_car.png"), car_path(car) %>
              <% end %>
              <div class="card-trip-infos">
                <div>
                  <%= car.address %>
                  <h2><%= link_to car.brand.upcase, car_path(car) %> <%= link_to car.model.capitalize, car_path(car) %></h2>
                </div>
                <h4 class="card-trip-pricing"><%= car.price_per_day %>€/jour</h4>
              </div>
            </div>
          <% end %>
        </div>
    <% else %>
      <h1>Aucun Résultat !</h1>
    <% end %>
</div>

<div class="filter-form">
  <%= simple_form_for "" do |f| %>
    <%= f.input_field :engine, as: :radio_buttons,
          collection: [[1, "Essence"], [2, "Diesel"]],
          label_method: :second, value_method: :first, label: false %>
    <br>
    <%= f.input_field :fuel, as: :radio_buttons,
          collection: [[2,"Automatique"], [1, "Manuelle"]],
          label_method: :second, value_method: :first, label: false %>
    <br>
    <%= f.input_field :engine, as: :radio_buttons,
          collection: [[3, "3 places"], [4, "4 places"], [5, "5 places"], [6, "6 places"], [7, "7 et + places"]],
          label_method: :second, value_method: :first, label: false %>
    <br>
    <%= f.input_field :year_of_production, as: :radio_buttons,
          collection: [[1, "Avant 2000"], [2, "2000-2010"], [3, "Après 2010"]],
          label_method: :second, value_method: :first, label: false %>
    <br>
    <%= f.input_field :price_per_day, as: :radio_buttons,
          collection: [[1, "- 20€"], [2, "20 à 50€"], [3, "50 à 100€"], [4, "+ 100€"]],
          label_method: :second, value_method: :first, label: false %>
    <%= f.submit "Trier", remote: true %>
  <% end %>
</div>
